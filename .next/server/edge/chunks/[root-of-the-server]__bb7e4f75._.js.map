{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 73, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/core/shared/i18n/config.ts"],"sourcesContent":["import { InitOptions } from 'i18next';\nimport resourcesToBackend from 'i18next-resources-to-backend';\n\nconst fallbackLng = 'ru';\nexport const normalizedFallbackLng = fallbackLng.toLowerCase();\n\nconst languages = [fallbackLng, 'en'];\nexport const normalizedLanguages = languages.map(lang => lang.toLowerCase());\n\nexport const defaultNS = 'translations';\nexport const cookieName = 'locale' as const;\n\nexport function getI18nConfig(\n    lng: string = fallbackLng,\n    ns: string | string[] = defaultNS\n): InitOptions {\n    return {\n        supportedLngs: normalizedLanguages,\n        fallbackLng,\n        lowerCaseLng: true,\n        lng,\n        fallbackNS: defaultNS,\n        defaultNS,\n        ns,\n        backend: {\n            backends: [\n                resourcesToBackend(\n                    (lng: string, ns: string) =>\n                        import(`../../../../public/locales/${lng}/${ns}.json`)\n                ),\n            ],\n        },\n    };\n}\n"],"names":[],"mappings":";;;;;;;AACA;;AAEA,MAAM,cAAc;AACb,MAAM,wBAAwB,YAAY,WAAW;AAE5D,MAAM,YAAY;IAAC;IAAa;CAAK;AAC9B,MAAM,sBAAsB,UAAU,GAAG,CAAC,CAAA,OAAQ,KAAK,WAAW;AAElE,MAAM,YAAY;AAClB,MAAM,aAAa;AAEnB,SAAS,cACZ,MAAc,WAAW,EACzB,KAAwB,SAAS;IAEjC,OAAO;QACH,eAAe;QACf;QACA,cAAc;QACd;QACA,YAAY;QACZ;QACA;QACA,SAAS;YACL,UAAU;gBACN,CAAA,GAAA,uQAAA,CAAA,UAAkB,AAAD,EACb,CAAC,KAAa;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8BACH,CAAC,2BAA2B,EAAE,IAAI,CAAC,EAAE,GAAG,KAAK,CAAC;aAEhE;QACL;IACJ;AACJ"}},
    {"offset": {"line": 194, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/middlewares/localization.ts"],"sourcesContent":["import acceptLanguage from 'accept-language';\nimport { NextRequest, NextResponse } from 'next/server';\n\nimport {\n    cookieName,\n    normalizedFallbackLng as fallbackLng,\n    normalizedLanguages as languages,\n} from '@/core/shared/i18n/config';\n\nacceptLanguage.languages(languages);\n\nexport function localizationMiddleware(req: NextRequest) {\n    let lng: string | null = null;\n\n    const pathnameLng = req.nextUrl.pathname.split('/')[1].toLowerCase();\n\n    if (pathnameLng && languages.includes(pathnameLng)) {\n        lng = pathnameLng;\n    }\n\n    if (!lng && req.cookies.get(cookieName)?.value.toLowerCase()) {\n        const cookieLng = acceptLanguage\n            .get(req.cookies.get(cookieName)?.value)\n            ?.toLowerCase();\n        if (cookieLng && languages.includes(cookieLng)) {\n            lng = cookieLng;\n        }\n    }\n\n    if (!lng) {\n        const browserLng = acceptLanguage\n            .get(req.headers.get('Accept-Language'))\n            ?.toLowerCase();\n\n        if (browserLng && languages.includes(browserLng)) {\n            lng = browserLng;\n        }\n    }\n\n    if (!lng) {\n        lng = fallbackLng;\n    }\n\n    if (\n        lng &&\n        req.cookies.get(cookieName)?.value.toLowerCase() &&\n        lng !== req.cookies.get(cookieName)?.value.toLowerCase()\n    ) {\n        // const response = NextResponse.redirect(\n        // \tnew URL(`${req.nextUrl.pathname}${req.nextUrl.search}`, req.url),\n        // );\n        req.cookies.set(cookieName, lng);\n        // return response;\n    }\n\n    if (\n        !languages.some(loc => req.nextUrl.pathname.startsWith(`/${loc}`)) &&\n        !req.nextUrl.pathname.startsWith('/_next')\n    ) {\n        const response = NextResponse.redirect(\n            new URL(\n                `/${lng.toLowerCase()}${req.nextUrl.pathname}${req.nextUrl.search}`,\n                req.url\n            )\n        );\n        response.cookies.set(cookieName, lng);\n        return response;\n    }\n\n    const response = NextResponse.next();\n    return response;\n}\n"],"names":[],"mappings":";;;AAAA;AACA;AAAA;AAEA;;;;AAMA,+OAAA,CAAA,UAAc,CAAC,SAAS,CAAC,+IAAA,CAAA,sBAAS;AAE3B,SAAS,uBAAuB,GAAgB;IACnD,IAAI,MAAqB;IAEzB,MAAM,cAAc,IAAI,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,WAAW;IAElE,IAAI,eAAe,+IAAA,CAAA,sBAAS,CAAC,QAAQ,CAAC,cAAc;QAChD,MAAM;IACV;IAEA,IAAI,CAAC,OAAO,IAAI,OAAO,CAAC,GAAG,CAAC,+IAAA,CAAA,aAAU,GAAG,MAAM,eAAe;QAC1D,MAAM,YAAY,+OAAA,CAAA,UAAc,CAC3B,GAAG,CAAC,IAAI,OAAO,CAAC,GAAG,CAAC,+IAAA,CAAA,aAAU,GAAG,QAChC;QACN,IAAI,aAAa,+IAAA,CAAA,sBAAS,CAAC,QAAQ,CAAC,YAAY;YAC5C,MAAM;QACV;IACJ;IAEA,IAAI,CAAC,KAAK;QACN,MAAM,aAAa,+OAAA,CAAA,UAAc,CAC5B,GAAG,CAAC,IAAI,OAAO,CAAC,GAAG,CAAC,qBACnB;QAEN,IAAI,cAAc,+IAAA,CAAA,sBAAS,CAAC,QAAQ,CAAC,aAAa;YAC9C,MAAM;QACV;IACJ;IAEA,IAAI,CAAC,KAAK;QACN,MAAM,+IAAA,CAAA,wBAAW;IACrB;IAEA,IACI,OACA,IAAI,OAAO,CAAC,GAAG,CAAC,+IAAA,CAAA,aAAU,GAAG,MAAM,iBACnC,QAAQ,IAAI,OAAO,CAAC,GAAG,CAAC,+IAAA,CAAA,aAAU,GAAG,MAAM,eAC7C;QACE,0CAA0C;QAC1C,qEAAqE;QACrE,KAAK;QACL,IAAI,OAAO,CAAC,GAAG,CAAC,+IAAA,CAAA,aAAU,EAAE;IAC5B,mBAAmB;IACvB;IAEA,IACI,CAAC,+IAAA,CAAA,sBAAS,CAAC,IAAI,CAAC,CAAA,MAAO,IAAI,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,KAAK,MAChE,CAAC,IAAI,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,WACnC;QACE,MAAM,WAAW,4TAAA,CAAA,eAAY,CAAC,QAAQ,CAClC,IAAI,IACA,CAAC,CAAC,EAAE,IAAI,WAAW,KAAK,IAAI,OAAO,CAAC,QAAQ,GAAG,IAAI,OAAO,CAAC,MAAM,EAAE,EACnE,IAAI,GAAG;QAGf,SAAS,OAAO,CAAC,GAAG,CAAC,+IAAA,CAAA,aAAU,EAAE;QACjC,OAAO;IACX;IAEA,MAAM,WAAW,4TAAA,CAAA,eAAY,CAAC,IAAI;IAClC,OAAO;AACX"}},
    {"offset": {"line": 247, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/core/shared/router/routes/auth.ts"],"sourcesContent":["const rootPath = '/auth';\r\n\r\nexport const authRoutes = {\r\n    index: rootPath,\r\n} as const;\r\n"],"names":[],"mappings":";;;AAAA,MAAM,WAAW;AAEV,MAAM,aAAa;IACtB,OAAO;AACX"}},
    {"offset": {"line": 260, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/core/shared/router/routes/index.ts"],"sourcesContent":["import { authRoutes } from './auth';\n\nexport const routes = {\n    index: '/',\n    auth: authRoutes,\n} as const;\n"],"names":[],"mappings":";;;AAAA;;AAEO,MAAM,SAAS;IAClB,OAAO;IACP,MAAM,yJAAA,CAAA,aAAU;AACpB"}},
    {"offset": {"line": 275, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/core/shared/router/protected.ts"],"sourcesContent":["import { routes } from './routes';\n\nexport const unauthenticatedForbiddenRoutes: string[] = [];\nexport const authenticatedForbiddenRoutes: string[] = [routes.auth.index];\n\nexport const isForbiddenRoute = (isAuthUser: boolean, pathname: string) => {\n    if (isAuthUser) {\n        return authenticatedForbiddenRoutes.some(route =>\n            pathname.includes(route)\n        );\n    }\n\n    return unauthenticatedForbiddenRoutes.some(route =>\n        pathname.includes(route)\n    );\n};\n"],"names":[],"mappings":";;;;;AAAA;;AAEO,MAAM,iCAA2C,EAAE;AACnD,MAAM,+BAAyC;IAAC,0JAAA,CAAA,SAAM,CAAC,IAAI,CAAC,KAAK;CAAC;AAElE,MAAM,mBAAmB,CAAC,YAAqB;IAClD,IAAI,YAAY;QACZ,OAAO,6BAA6B,IAAI,CAAC,CAAA,QACrC,SAAS,QAAQ,CAAC;IAE1B;IAEA,OAAO,+BAA+B,IAAI,CAAC,CAAA,QACvC,SAAS,QAAQ,CAAC;AAE1B"}},
    {"offset": {"line": 298, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/core/shared/router/index.ts"],"sourcesContent":["export {\n    authenticatedForbiddenRoutes,\n    isForbiddenRoute,\n    unauthenticatedForbiddenRoutes,\n} from './protected';\nexport { routes } from './routes';\n"],"names":[],"mappings":";AAAA;AAKA"}},
    {"offset": {"line": 319, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/middlewares/protectedRoutes.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\n\nimport { isForbiddenRoute, routes } from '@/core/shared/router';\n\nexport function protectedRoutesMiddleware(\n    request: NextRequest\n): NextResponse | undefined {\n    const isAuthUser = request.cookies.has('accessToken');\n    const pathname = request.nextUrl.pathname;\n    const queryParams = request.nextUrl.search;\n\n    if (isForbiddenRoute(isAuthUser, pathname)) {\n        const redirectPathname = isAuthUser ? routes.index : routes.auth.index;\n        const url = new URL(`${redirectPathname}${queryParams}`, request.url);\n\n        return NextResponse.redirect(url);\n    }\n\n    return NextResponse.next();\n}\n"],"names":[],"mappings":";;;AAAA;AAAA;AAEA;AAAA;AAAA;;;AAEO,SAAS,0BACZ,OAAoB;IAEpB,MAAM,aAAa,QAAQ,OAAO,CAAC,GAAG,CAAC;IACvC,MAAM,WAAW,QAAQ,OAAO,CAAC,QAAQ;IACzC,MAAM,cAAc,QAAQ,OAAO,CAAC,MAAM;IAE1C,IAAI,CAAA,GAAA,oJAAA,CAAA,mBAAgB,AAAD,EAAE,YAAY,WAAW;QACxC,MAAM,mBAAmB,aAAa,0JAAA,CAAA,SAAM,CAAC,KAAK,GAAG,0JAAA,CAAA,SAAM,CAAC,IAAI,CAAC,KAAK;QACtE,MAAM,MAAM,IAAI,IAAI,GAAG,mBAAmB,aAAa,EAAE,QAAQ,GAAG;QAEpE,OAAO,4TAAA,CAAA,eAAY,CAAC,QAAQ,CAAC;IACjC;IAEA,OAAO,4TAAA,CAAA,eAAY,CAAC,IAAI;AAC5B"}},
    {"offset": {"line": 346, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/middleware.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\n\nimport { localizationMiddleware } from './middlewares/localization';\nimport { protectedRoutesMiddleware } from './middlewares/protectedRoutes';\n\nexport const config = {\n    matcher: [\n        '/((?!api|_next/static|_next/image|assets|favicon.ico|sw.js|site.webmanifest).*)',\n    ],\n};\n\nconst middlewareChain = [localizationMiddleware, protectedRoutesMiddleware];\n\nexport function middleware(request: NextRequest): NextResponse {\n    for (const mw of middlewareChain) {\n        const response = mw(request);\n\n        if (response && response.status >= 300 && response.status < 400) {\n            return response;\n        }\n    }\n\n    return NextResponse.next();\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAEA;AACA;;;;AAEO,MAAM,SAAS;IAClB,SAAS;QACL;KACH;AACL;AAEA,MAAM,kBAAkB;IAAC,0IAAA,CAAA,yBAAsB;IAAE,6IAAA,CAAA,4BAAyB;CAAC;AAEpE,SAAS,WAAW,OAAoB;IAC3C,KAAK,MAAM,MAAM,gBAAiB;QAC9B,MAAM,WAAW,GAAG;QAEpB,IAAI,YAAY,SAAS,MAAM,IAAI,OAAO,SAAS,MAAM,GAAG,KAAK;YAC7D,OAAO;QACX;IACJ;IAEA,OAAO,4TAAA,CAAA,eAAY,CAAC,IAAI;AAC5B"}}]
}